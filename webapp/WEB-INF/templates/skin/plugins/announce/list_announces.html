<div class="row">
	<div class="col-sm-3">
		<#include "navigation_menu.html">
	</div>
	<div class="col-sm-9">
			<div class="well">
				<div class="well">
			    <legend>#i18n{announce.search_form.title}</legend>
			        <form class="form_search" method="post" action="jsp/site/Portal.jsp">
			        	<div class="form-group">
				            #i18n{announce.search_form.keyWordsLabel}
				            <input type="text" value="${(filter.keywords)!}" name="keywords"/>
				            <select name="category_id">
				                <option value="0">#i18n{announce.search_form.defaultCategoryLabel}</option>
				                <#list list_sectors as sector>
				                <optgroup label="${sector.label}">
				                    <#list sector.listCategories as category>
				                        <#if (filter.idCategory)?? && filter.idCategory == category.id>
				                            <option selected="selected" value="${category.id}">${category.label}</option>
				                        <#else>
				                            <option value="${category.id}">${category.label}</option>
				                        </#if>
				                    </#list>
				                </optgroup>
				                </#list>
				            </select>
				            <br/>
			            </div>
			            <div class="form-group">
			            	#i18n{announce.search_form.dateMinLabel}  <input size="12" type="text" id="date_min" name="date_min" value="${filter_date_min!}"> 
			            	#i18n{announce.search_form.dateMaxLabel}  <input size="12" type="text" id="date_max" name="date_max" value="${filter_date_max!}">
			            </div>
			            <div class="form-group">
			           		#i18n{announce.search_form.priceMinLabel}
			            	<input class="input-small" size="5" type="text" id="price_min" name="price_min" value="<#if (filter.priceMin)?? && filter.priceMin &gt; 0>${filter.priceMin}</#if>">
				            <span class="add-on">&euro;</span>
			           
			          		#i18n{announce.search_form.priceMaxLabel}
			            	<input class="input-small" size="5" type="text" id="price_max" name="price_max" value="<#if (filter.priceMax)?? && filter.priceMax &gt; 0>${filter.priceMax}</#if>">
			            	<span class="add-on">&euro;</span>
			            </div>
			            
			            <div class="form-actions">
				            <div class="form-group">
					            <button class="btn btn-primary" type="submit" name="search" value="#i18n{announce.search_form.search}">
					            	<i class="icon-search icon-white">&nbsp;</i>&nbsp;#i18n{announce.search_form.search}
					            </button>
					            <a class="btn" href="jsp/site/Portal.jsp?page=announce&action=search&hasFilter=true" >
					            	<i class="icon-remove-circle">&nbsp;</i>&nbsp;#i18n{announce.search_form.reset}
					            </a> 
					        </div>
				            <input type="hidden" name="action" value="search" />
				            <input type="hidden" name="page" value="announce" />
				            <input type="hidden" name="hasFilter" value="true" />
				            <div class="pull-right">
				        		<#if user?? && filter?? && ( ( filter.keywords?? && filter.keywords != '' ) || filter.priceMin &gt; 0 || filter.priceMax &gt; 0 ) && filter.idFilter == 0 >
						    		<a class="btn btn-primary" href="jsp/site/Portal.jsp?page=announce-subscribe&action=doCreateSubscriptionFilter" title="#i18n{announce.labelCreateFilterSubscriptionTitle}">
						    			#i18n{announce.labelCreateFilterSubscription}
						    		</a>
						    	</#if>
					    	</div>
				   		</div>
			        </form>
			   </div>
			</div>
	
		<@getDatePickerBootstrap idField="date_min" language=locale />
		<@getDatePickerBootstrap idField="date_max" language=locale />
		
		<#if (paginator.pagesCount > 1) >
			<div class="paginator">
				Pages: <@pagination paginator=paginator />
			</div>
		</#if>
		<div class="well">
			<#if announces_list?has_content>
				<table class="table">
					<#list announces_list as announce>
						<tr>
							<td>
								<div class="announce-result clearfix">
									<#if announce.hasPictures>
										<#list announce.listIdImageResponse as idImageResponse>
											<#if idImageResponse_index == 0>
												<a href="jsp/site/Portal.jsp?page=announce&action=view_announce&announce_id=${announce.id}">
													<img class="thumbnail" width="80" height="80" src="image?resource_type=GENERICATTRIBUTES_RESPONSE&id=${idImageResponse}" />
												</a>
											</#if>
										</#list>
									<#else>
										<a title="${announce.title}" href="jsp/site/Portal.jsp?page=announce&action=view_announce&announce_id=${announce.id}">
											<img class="thumbnail" width="80" height="80" src="./images/local/skin/plugins/announce/no_picture.png" />
										</a>
									</#if>
									<#if announce.category.displayPrice && announce.price?has_content>
										<div class="price">
											${announce.price}
										</div>
									</#if>
									<div class="title">
										<a href="jsp/site/Portal.jsp?page=announce&action=view_announce&announce_id=${announce.id}">
											${announce.title} - <span class="category">${announce.category.label}</span>
										</a>
									</div>
									<span class="info">${announce.dateCreation}</span><br/>
									${announce.description}<br />
									<a href="jsp/site/Portal.jsp?page=announce&action=view_announces&username=${announce.userName}">
										#i18n{announce.list_announces.otherAnnounces}
									</a>
								</div>
							</td>
						</tr>
					</#list>
				</table>
			<#else>
				#i18n{announce.list_announces.noAnnounces}
			</#if>
		</div>
	
	</div>
</div>